(this["webpackJsonpherolo-weather-app"]=this["webpackJsonpherolo-weather-app"]||[]).push([[0],{39:function(e,t,r){},47:function(e,t,r){"use strict";r.r(t);var n=r(0),c=r(21),a=r.n(c),s=(r(39),r(4)),o=r(7),i=r(10),u=r(16);function l(e){return function(t){try{t({type:"SET_CITY",cityKey:e})}catch(r){t({type:"ERROR",err:r})}}}function j(e){return function(t){try{t({type:"ERROR",msg:e})}catch(r){console.log("there was an error",r)}}}var d=r(1),f=function(e){var t=e.msg,r=e.onCloseModal;return Object(d.jsx)("div",{className:"msg-modal",children:Object(d.jsxs)("section",{className:"modal-main flex column justify-center align-center",children:[t,Object(d.jsx)("br",{}),Object(d.jsx)("button",{type:"close-modal-button",onClick:r,children:"Close"})]})})};function p(){var e=Object(i.c)((function(e){return e.weatherModule})),t=e.darkMod,r=e.error,c=Object(n.useState)(!1),a=Object(o.a)(c,2),s=a[0],l=a[1],j=Object(n.useState)("\u2103"),p=Object(o.a)(j,2),h=p[0],b=p[1],v=Object(i.b)();Object(n.useEffect)((function(){var e;v((e=h,function(t){try{t({type:"SET_DEGREE",degree:e})}catch(r){t({type:"ERROR",err:r})}}))}),[h]),Object(n.useEffect)((function(){v(function(e){return function(t){try{t({type:"SET_DARKMOD",isDark:e})}catch(r){t({type:"ERROR",err:r})}}}(s))}),[s]);var O=function(){s?document.querySelector(".weather-app").classList.remove("dark"):document.querySelector(".weather-app").classList.add("dark"),l(!s)};return Object(d.jsxs)("header",{className:t?"main-layout app-header dark":"main-layout app-header",children:[Object(d.jsxs)("nav",{className:"main-nav flex space-between",children:[s?Object(d.jsx)("button",{onClick:O,children:"Toggle light"}):Object(d.jsx)("button",{onClick:O,children:"Toggle Dark"}),Object(d.jsx)("button",{onClick:function(){b("\u2103"===h?"\u2109":"\u2103")},children:h}),Object(d.jsxs)("div",{className:"links flex space-between",children:[Object(d.jsx)(u.b,{to:"/",children:"weather app"}),Object(d.jsx)(u.b,{to:"/favoritCities",children:"favorit cities"})]})]}),r&&Object(d.jsx)(f,{msg:r})]})}var h=r(3),b=r.n(h),v=r(6);var O={loadFromStorage:function(e){var t=localStorage.getItem(e);return t?JSON.parse(t):null},saveToStorage:function(e,t){localStorage[e]=JSON.stringify(t)}},m={save:function(e,t){return C.apply(this,arguments)},remove:function(e){try{var t=w.findIndex((function(t){return t._id===e}));return w.splice(t,1),O.saveToStorage(x,w),Promise.resolve()}catch(r){throw new Error(r)}},loadCities:function(){try{return O.loadFromStorage(x)||[]}catch(e){throw new Error(e)}},searchCityByCityKey:function(e){return S.apply(this,arguments)},searchCityAutoComplete:function(e){return k.apply(this,arguments)},getCityCurrentCondition:function(e){return E.apply(this,arguments)},get5DayForeCast:function(e,t){return N.apply(this,arguments)},getLatLanCoor:function(e,t){return M.apply(this,arguments)}},x="cities",y="BmFV9KHIUx2TcW2wwfyb8GWT1lOc5i2L",g="http://dataservice.accuweather.com",w=[];function C(){return(C=Object(v.a)(b.a.mark((function e(t,r){var n,c,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.getCityCurrentCondition(t);case 3:return n=e.sent,c={_id:D(),name:r,cityCurrentCondition:n,cityKey:t},w.push(c),O.saveToStorage(x,w),e.abrupt("return",Promise.resolve(c));case 10:return e.prev=10,e.t0=e.catch(0),a=e.t0,e.abrupt("return",Promise.reject(a));case 14:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function k(){return(k=Object(v.a)(b.a.mark((function e(t){var r,n,c,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(g,"/locations/v1/cities/autocomplete?apikey=").concat(y,"&q=").concat(t));case 3:if((r=e.sent).ok){e.next=7;break}throw n="An error has occured: ".concat(r.status),new Error(n);case 7:return e.next=9,r.json();case 9:return c=e.sent,e.abrupt("return",c);case 13:e.prev=13,e.t0=e.catch(0),a=e.t0.message,Promise.reject(a);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}function S(){return(S=Object(v.a)(b.a.mark((function e(t){var r,n,c,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(g,"/locations/v1/").concat(t,"?apikey=").concat(y));case 3:if((r=e.sent).ok){e.next=7;break}throw n="An error has occured: ".concat(r.status),new Error(n);case 7:return e.next=9,r.json();case 9:return c=e.sent,e.abrupt("return",c);case 13:e.prev=13,e.t0=e.catch(0),a=e.t0.message,Promise.reject(a);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}function E(){return(E=Object(v.a)(b.a.mark((function e(t){var r,n,c,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(g,"/currentconditions/v1/").concat(t,"?apikey=").concat(y,"&details=false"));case 3:if((r=e.sent).ok){e.next=7;break}throw n="An error has occured: ".concat(r.status),new Error(n);case 7:return e.next=9,r.json();case 9:return c=e.sent,e.abrupt("return",c);case 13:e.prev=13,e.t0=e.catch(0),a=e.t0.message,Promise.reject(a);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}function N(){return(N=Object(v.a)(b.a.mark((function e(t,r){var n,c,a,s,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(){return"\u2103"===r},e.prev=1,e.next=4,fetch("".concat(g,"/forecasts/v1/daily/5day/").concat(t,"?apikey=").concat(y,"&metric=").concat(n()));case 4:if((c=e.sent).ok){e.next=8;break}throw a="An error has occured: ".concat(c.status),new Error(a);case 8:return e.next=10,c.json();case 10:return s=e.sent,e.abrupt("return",s);case 14:e.prev=14,e.t0=e.catch(1),o=e.t0.message,Promise.reject(o);case 18:case"end":return e.stop()}}),e,null,[[1,14]])})))).apply(this,arguments)}function M(){return(M=Object(v.a)(b.a.mark((function e(t,r){var n,c,a,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(g,"/locations/v1/cities/geoposition/search?apikey=").concat(y,"&q=").concat(t,",").concat(r));case 3:if((n=e.sent).ok){e.next=7;break}throw c="An error has occured: ".concat(n.status),new Error(c);case 7:return e.next=9,n.json();case 9:return a=e.sent,e.abrupt("return",a);case 13:e.prev=13,e.t0=e.catch(0),s=e.t0.message,Promise.reject(s);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}function D(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<e;n++)t+=r.charAt(Math.floor(Math.random()*r.length));return t}var T=function(e){var t=e.onSearch,r=e.onGetCityForecast,c=Object(n.useState)(""),a=Object(o.a)(c,2),s=a[0],i=a[1],u=Object(n.useState)(null),l=Object(o.a)(u,2),j=l[0],f=l[1];Object(n.useEffect)(Object(v.a)(b.a.mark((function e(){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(s);case 2:r=e.sent,f(r);case 4:case"end":return e.stop()}}),e)}))),[s]);var p=function(){var e=Object(v.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i(t.target.value);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsxs)("div",{className:"city-search flex align-center justify-center",children:[Object(d.jsx)("input",{type:"text",list:"cities",onChange:p,name:"cityInput",value:s,placeholder:"search city"}),j&&Object(d.jsx)("datalist",{id:"cities",children:j.map((function(e){return e.key,Object(d.jsx)("option",{value:e.LocalizedName},e.Key)}))}),Object(d.jsx)("button",{onClick:function(){console.log("cities",j),r(j[0].Key)},children:"Search"})]})},R=r(59);function I(e){var t,r,n=e.day,c=e.degree,a=e.isDarkMode;return Object(d.jsxs)("div",{className:"weather-preview ".concat(a()," flex column align-center justify-center"),children:[Object(d.jsx)("span",{children:function(){var e=n.Date.substr(0,4),t=n.Date.substr(5,2),r=n.Date.substr(8,2);return"".concat(r,"-").concat(t,"-").concat(e)}()}),Object(d.jsx)("br",{}),Object(d.jsxs)("div",{children:[Object(d.jsx)("span",{children:(t=n.Temperature.Minimum.Value,r=n.Temperature.Maximum.Value,(""+(t+r)/2).substr(0,4))}),Object(d.jsx)("span",{children:c})]}),Object(d.jsxs)("div",{className:"flex column align-center justify-center",children:[n.Day.IconPhrase,Object(d.jsx)("img",{src:"/herolo-weather-app"+"/images/".concat(n.Day.Icon,".png"),alt:"day icon"})]}),Object(d.jsxs)("div",{className:"flex column align-center justify-center",children:[n.Night.IconPhrase,Object(d.jsx)("img",{src:"/herolo-weather-app"+"/images/".concat(n.Night.Icon,".png"),alt:"night icon"})]})]})}var K=function(e){var t=e.forecast,r=e.degree,n=e.isDarkMode;return Object(d.jsx)("div",{className:"wheather-list flex jastify-center align-center",children:t.map((function(e){return Object(d.jsx)(R.a,{variant:"outlined",className:"weather-preview-card",children:Object(d.jsx)(I,{day:e,degree:r,isDarkMode:n})},e.EpochDate)}))})},_=function(){var e,t=Object(i.c)((function(e){return e.weatherModule})),r=t.cityKey,c=t.darkMod,a=t.degree,s=t.error,u=Object(n.useState)(""),p=Object(o.a)(u,2),h=p[0],O=p[1],x=Object(n.useState)(""),y=Object(o.a)(x,2),g=y[0],w=y[1],C=Object(n.useState)(""),k=Object(o.a)(C,2),S=k[0],E=k[1],N=Object(n.useState)(""),M=Object(o.a)(N,2),D=M[0],R=M[1],I=Object(i.b)();Object(n.useEffect)((function(){if(""===r)navigator.geolocation.getCurrentPosition(_,P);else try{A(r)}catch(e){I(j(e))}}),[]),Object(n.useEffect)(Object(v.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.loadCities();case 3:t=e.sent,E(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),I(j(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[]);var _=function(){var e=Object(v.a)(b.a.mark((function e(t){var r,n,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=t.coords.latitude,n=t.coords.longitude,e.next=5,m.getLatLanCoor(r,n);case 5:return c=e.sent,I(l(c.cityKey)),R(c.LocalizedName),e.next=10,A(c.Key);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),I(j(e.t0));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),P=function(){try{I(l("215854")),I(j("there was an error to get location"))}catch(e){I(j(e))}},L=function(){return c?"dark":""},F=function(){var e=Object(v.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.searchCityAutoComplete(t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),I(j(e.t0));case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(v.a)(b.a.mark((function e(t){var r,n,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,I(l(t)),e.next=4,m.get5DayForeCast(t,a);case 4:return r=e.sent,e.next=7,m.getCityCurrentCondition(t);case 7:return n=e.sent,e.next=10,m.searchCityByCityKey(t);case 10:c=e.sent,w(n[0]),O(r.DailyForecasts),R(c.LocalizedName),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),I(j(e.t0));case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsxs)("section",{className:"main-layout",children:[Object(d.jsxs)("div",{className:"forecast-page ".concat(L()," flex column justify-center align-center"),children:[Object(d.jsx)(T,{onSearch:F,onGetCityForecast:A}),D&&Object(d.jsx)("h1",{children:D}),g&&Object(d.jsx)("span",{children:g.WeatherText}),Object(d.jsx)("span",{children:Object(d.jsx)("img",{src:"/herolo-weather-app"+"/images/".concat(g.WeatherIcon,".png"),alt:"current condition icon"})}),h&&Object(d.jsxs)("span",{className:"current-temp",children:["\u2103"===a?g.Temperature.Metric.Value:g.Temperature.Imperial.Value,a]}),h&&Object(d.jsx)(K,{forecast:h,isDarkMode:L,degree:a,darkMod:c}),S&&0!==S.length&&S.some((function(t){return e=t._id,t.cityKey===r}))?Object(d.jsx)("button",{className:"btn-remove-from-favorit",onClick:function(){try{m.remove(e),I(j("city removed"))}catch(t){I(j(t))}},children:"delete city from favorits"}):Object(d.jsx)("button",{className:"btn-add-to-favorit",onClick:function(){return function(){try{m.save(r,D),I(j("city added to favorits"))}catch(e){I(j(e))}}()},children:"add to favorit cities"})]}),s&&Object(d.jsx)(f,{msg:s,onCloseModal:function(){I(j(""))}})]})};function P(e){var t=e.favoritCity,r=e.onDeleteCity,c=e.onSetCity,a=e.isDarkMode,s=e.degree,i=Object(n.useState)(""),l=Object(o.a)(i,2),j=l[0],f=l[1],p=Object(n.useState)(""),h=Object(o.a)(p,2),b=h[0],v=h[1];Object(n.useEffect)((function(){f(O()),v(m())}),[s]);var O=function(){return"\u2103"===s?t.cityCurrentCondition[0].Temperature.Metric.Value:t.cityCurrentCondition[0].Temperature.Imperial.Value},m=function(){return"\u2103"===s?t.cityCurrentCondition[0].Temperature.Metric.Unit:t.cityCurrentCondition[0].Temperature.Imperial.Unit};return Object(d.jsx)("div",{className:"favorit-preview ".concat(a()," flex column align-center justify-center"),onClick:function(){c(t.cityKey)},children:Object(d.jsxs)(u.b,{to:"/",className:"favorit-preview-link",children:[Object(d.jsx)("h1",{className:"favorit-preview-h1 ".concat(a()),children:t.name}),Object(d.jsxs)("div",{className:"favorit-preview-content flex column justify-center align-center",children:[Object(d.jsxs)("span",{className:"favorit-preview-span ".concat(a()),children:[j&&Object(d.jsx)("span",{children:j}),j&&Object(d.jsx)("span",{children:b})]}),Object(d.jsxs)("span",{className:"favorit-preview-span ".concat(a()," flex column justify-center align-center"),children:[t.cityCurrentCondition[0].WeatherText,Object(d.jsx)("img",{src:"/herolo-weather-app"+"/images/".concat(t.cityCurrentCondition[0].WeatherIcon,".png"),alt:"current condition icon"})]}),Object(d.jsx)("button",{className:"delete-btn",onClick:function(e){return function(e){e.preventDefault(),r(t._id)}(e)},children:"remove city"})]})]})})}var L=function(e){var t=e.favoritCities,r=e.onDeleteCity,n=e.onSetCity,c=e.isDarkMode,a=e.degree,s=e.darkMod;return t&&0!==t.length?Object(d.jsx)("div",{className:"favorit-list flex align-center justify-center",children:t.map((function(e){return Object(d.jsx)(R.a,{variant:"outlined",children:Object(d.jsx)(P,{favoritCity:e,onDeleteCity:r,onSetCity:n,isDarkMode:c,degree:a,darkMod:s})},e._id)}))}):Object(d.jsx)("div",{children:"There is no favorit cities"})},F=function(){var e=Object(i.c)((function(e){return e.weatherModule})),t=e.darkMod,r=e.degree,c=e.error,a=Object(n.useState)(""),s=Object(o.a)(a,2),u=s[0],p=s[1],h=Object(i.b)();Object(n.useEffect)(Object(v.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.loadCities();case 3:t=e.sent,p(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),h(j(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[c]);var O=function(){return t?"dark":""};return Object(d.jsx)("div",{children:Object(d.jsxs)("section",{className:"main-layout",children:[Object(d.jsx)("div",{className:"favorit-page ".concat(O()," flex column"),children:u&&Object(d.jsx)(L,{favoritCities:u,onDeleteCity:function(e){try{m.remove(e);var t=m.loadCities();p(t),h(j("city removed"))}catch(r){h(j(r))}},onSetCity:function(e){try{h(l(e))}catch(t){h(j(t))}},isDarkMode:O,degree:r,darkMod:t})}),c&&Object(d.jsx)(f,{msg:c,onCloseModal:function(){h(j(""))}})]})})};function A(){var e=Object(i.c)((function(e){return e.weatherModule})).darkMod;return Object(d.jsx)("footer",{className:e?"app-footer dark flex align-center justify-center":"app-footer flex align-center justify-center",children:Object(d.jsx)("div",{className:"flex justify-center align-center",children:"Coffeerights 2020"})})}var V=function(){return Object(d.jsxs)("div",{className:"weather-app",children:[Object(d.jsx)(p,{}),Object(d.jsxs)(s.c,{children:[Object(d.jsx)(s.a,{path:"/favoritCities",component:F}),Object(d.jsx)(s.a,{path:"/",component:_})]}),Object(d.jsx)(A,{})]})},W=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,60)).then((function(t){var r=t.getCLS,n=t.getFID,c=t.getFCP,a=t.getLCP,s=t.getTTFB;r(e),n(e),c(e),a(e),s(e)}))},B=r(20),G=r(32),q=r(15),J={cityKey:"",error:"",darkMod:!1,degree:"\u2103"};var U=Object(B.b)({weatherModule:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CITY":return Object(q.a)(Object(q.a)({},e),{},{cityKey:t.cityKey});case"SET_DARKMOD":return Object(q.a)(Object(q.a)({},e),{},{darkMod:t.isDark});case"SET_DEGREE":return Object(q.a)(Object(q.a)({},e),{},{degree:t.degree});case"ERROR":return Object(q.a)(Object(q.a)({},e),{},{error:t.msg});default:return e}}}),z=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||B.c,X=Object(B.d)(U,z(Object(B.a)(G.a)));a.a.render(Object(d.jsx)(i.a,{store:X,children:Object(d.jsx)(u.a,{children:Object(d.jsx)(V,{})})}),document.getElementById("root")),W()}},[[47,1,2]]]);
//# sourceMappingURL=main.730c2db0.chunk.js.map