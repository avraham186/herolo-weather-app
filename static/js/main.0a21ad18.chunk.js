(this["webpackJsonpherolo-weather-app"]=this["webpackJsonpherolo-weather-app"]||[]).push([[0],{42:function(e,t,r){},50:function(e,t,r){"use strict";r.r(t);var n=r(0),c=r(22),a=r.n(c),i=(r(42),r(4)),o=r(11),s=r(10),u=r(16),l=r(3),d=r.n(l),j=r(7);var f={loadFromStorage:function(e){var t=localStorage.getItem(e);return t?JSON.parse(t):null},saveToStorage:function(e,t){localStorage[e]=JSON.stringify(t)}},p={save:function(e,t){try{if(e._id)return;var r={_id:C(),name:e.LocalizedName,cityCurrentCondition:t,cityKey:e.Key};return v.push(r),f.saveToStorage("cities",v),Promise.resolve(r)}catch(c){var n=c;return Promise.resolve(n)}},searchCityByCityKey:function(e){return y.apply(this,arguments)},searchCityAutoComplete:function(e){return O.apply(this,arguments)},getCityCurrentCondition:function(e){return m.apply(this,arguments)},get5DayForeCast:function(e,t){return x.apply(this,arguments)},getLatLanCoor:function(e,t){return g.apply(this,arguments)}},b="BmFV9KHIUx2TcW2wwfyb8GWT1lOc5i2L",h="https://dataservice.accuweather.com",v=[];function O(){return(O=Object(j.a)(d.a.mark((function e(t){var r,n,c,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(h,"/locations/v1/cities/autocomplete?apikey=").concat(b,"&q=").concat(t));case 3:if((r=e.sent).ok){e.next=7;break}throw n="An error has occured: ".concat(r.status),new Error(n);case 7:return e.next=9,r.json();case 9:return c=e.sent,e.abrupt("return",c);case 13:e.prev=13,e.t0=e.catch(0),a=e.t0.message,Promise.resolve(a);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}function y(){return(y=Object(j.a)(d.a.mark((function e(t){var r,n,c,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(h,"/locations/v1/").concat(t,"?apikey=").concat(b));case 3:if((r=e.sent).ok){e.next=7;break}throw n="An error has occured: ".concat(r.status),new Error(n);case 7:return e.next=9,r.json();case 9:return c=e.sent,e.abrupt("return",c);case 13:e.prev=13,e.t0=e.catch(0),a=e.t0.message,Promise.resolve(a);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}function m(){return(m=Object(j.a)(d.a.mark((function e(t){var r,n,c,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(h,"/currentconditions/v1/").concat(t,"?apikey=").concat(b,"&details=false"));case 3:if((r=e.sent).ok){e.next=7;break}throw n="An error has occured: ".concat(r.status),new Error(n);case 7:return e.next=9,r.json();case 9:return c=e.sent,e.abrupt("return",c);case 13:e.prev=13,e.t0=e.catch(0),a=e.t0.message,Promise.resolve(a);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}function x(){return(x=Object(j.a)(d.a.mark((function e(t,r){var n,c,a,i,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(){return"\u2103"===r},e.prev=1,e.next=4,fetch("".concat(h,"/forecasts/v1/daily/5day/").concat(t,"?apikey=").concat(b,"&metric=").concat(n()));case 4:if((c=e.sent).ok){e.next=8;break}throw a="An error has occured: ".concat(c.status),new Error(a);case 8:return e.next=10,c.json();case 10:return i=e.sent,e.abrupt("return",i);case 14:e.prev=14,e.t0=e.catch(1),o=e.t0.message,Promise.resolve(o);case 18:case"end":return e.stop()}}),e,null,[[1,14]])})))).apply(this,arguments)}function g(){return(g=Object(j.a)(d.a.mark((function e(t,r){var n,c,a,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(h,"/locations/v1/cities/geoposition/search?apikey=").concat(b,"&q=").concat(t,",").concat(r));case 3:if((n=e.sent).ok){e.next=7;break}throw c="An error has occured: ".concat(n.status),new Error(c);case 7:return e.next=9,n.json();case 9:return a=e.sent,e.abrupt("return",a);case 13:e.prev=13,e.t0=e.catch(0),i=e.t0.message,Promise.resolve(i);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}function C(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<e;n++)t+=r.charAt(Math.floor(Math.random()*r.length));return t}function k(e){return function(t){try{t({type:"SET_CITY",cityKey:e})}catch(r){t({type:"ERROR",err:r})}}}function w(e){return function(t){try{t({type:"REMOVE_CITY",cityId:e})}catch(r){t({type:"ERROR",err:r})}}}function E(e){return function(t){try{t({type:"ERROR",msg:e})}catch(r){console.log("there was an error",r)}}}var M=r(1),S=function(e){var t=e.msg,r=e.onCloseModal;return Object(M.jsx)("div",{className:"msg-modal",children:Object(M.jsxs)("section",{className:"modal-main flex column justify-center align-center",children:[t,Object(M.jsx)("br",{}),Object(M.jsx)("button",{type:"close-modal-button",onClick:r,children:"Close"})]})})};function D(){var e=Object(s.c)((function(e){return e.weatherModule})),t=e.darkMod,r=e.error,c=Object(n.useState)(!1),a=Object(o.a)(c,2),i=a[0],l=a[1],d=Object(n.useState)("\u2103"),j=Object(o.a)(d,2),f=j[0],p=j[1],b=Object(s.b)();Object(n.useEffect)((function(){var e;b((e=f,function(t){try{t({type:"SET_DEGREE",degree:e})}catch(r){t({type:"ERROR",err:r})}}))}),[f]),Object(n.useEffect)((function(){b(function(e){return function(t){try{t({type:"SET_DARKMOD",isDark:e})}catch(r){t({type:"ERROR",err:r})}}}(i))}),[i]);var h=function(){i?document.querySelector(".weather-app").classList.remove("dark"):document.querySelector(".weather-app").classList.add("dark"),l(!i)};return Object(M.jsxs)("header",{className:t?"main-layout app-header dark":"main-layout app-header",children:[Object(M.jsxs)("nav",{className:"main-nav flex space-between",children:[i?Object(M.jsx)("button",{onClick:h,children:"Toggle light"}):Object(M.jsx)("button",{onClick:h,children:"Toggle Dark"}),Object(M.jsx)("button",{onClick:function(){p("\u2103"===f?"\u2109":"\u2103")},children:f}),Object(M.jsxs)("div",{className:"links flex space-between",children:[Object(M.jsxs)(u.b,{to:"/",children:[" ",Object(M.jsx)("img",{src:"imgs/logo.png",alt:""}),"weather app"]}),Object(M.jsx)(u.b,{to:"/favoritCities",children:"favorit cities"})]})]}),r&&Object(M.jsx)(S,{msg:r})]})}var N=function(e){var t=e.onSearch,r=e.onGetCityForecast,c=Object(n.useState)(""),a=Object(o.a)(c,2),i=a[0],s=a[1],u=Object(n.useState)(null),l=Object(o.a)(u,2),f=l[0],p=l[1];Object(n.useEffect)(Object(j.a)(d.a.mark((function e(){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(i);case 2:r=e.sent,p(r);case 4:case"end":return e.stop()}}),e)}))),[i]);var b=function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s(t.target.value);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(M.jsxs)("div",{className:"city-search flex align-center justify-center",children:[Object(M.jsx)("input",{type:"text",list:"cities",onChange:b,name:"cityInput",value:i,placeholder:"search city"}),f&&Object(M.jsx)("datalist",{id:"cities",children:f.map((function(e){return e.key,Object(M.jsx)("option",{value:e.LocalizedName},e.Key)}))}),Object(M.jsx)("button",{onClick:function(){console.log("cities",f),r(f[0].Key)},children:"Search"})]})},T=r(62);function R(e){var t,r,n=e.day,c=e.degree,a=e.isDarkMode;return Object(M.jsxs)("div",{className:"weather-preview ".concat(a()," flex column align-center justify-center"),children:[Object(M.jsx)("span",{children:function(){var e=n.Date.substr(0,4),t=n.Date.substr(5,2),r=n.Date.substr(8,2);return"".concat(r,"-").concat(t,"-").concat(e)}()}),Object(M.jsx)("br",{}),Object(M.jsxs)("div",{children:[Object(M.jsx)("span",{children:(t=n.Temperature.Minimum.Value,r=n.Temperature.Maximum.Value,(""+(t+r)/2).substr(0,4))}),Object(M.jsx)("span",{children:c})]}),Object(M.jsxs)("div",{children:["Day will be",n.Day.IconPhrase]}),Object(M.jsxs)("div",{children:["Night will be",n.Night.IconPhrase]})]})}var _=function(e){var t=e.forecast,r=e.degree,n=e.isDarkMode;return Object(M.jsx)("div",{className:"wheather-list flex jastify-center align-center",children:t.map((function(e){return Object(M.jsx)(T.a,{variant:"outlined",className:"weather-preview-card",children:Object(M.jsx)(R,{day:e,degree:r,isDarkMode:n})},e.EpochDate)}))})},I=function(){var e,t=Object(s.c)((function(e){return e.weatherModule})),r=t.favoritCities,c=t.cityKey,a=t.darkMod,i=t.degree,u=t.error,l=Object(n.useState)(""),f=Object(o.a)(l,2),b=f[0],h=f[1],v=Object(n.useState)(""),O=Object(o.a)(v,2),y=O[0],m=O[1],x=Object(n.useState)(""),g=Object(o.a)(x,2),C=g[0],D=g[1],T=Object(s.b)();Object(n.useEffect)((function(){""===c?navigator.geolocation.getCurrentPosition(R,I):L(c)}),[]);var R=function(){var e=Object(j.a)(d.a.mark((function e(t){var r,n,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.coords.latitude,n=t.coords.longitude,e.next=4,p.getLatLanCoor(r,n);case 4:return c=e.sent,D(c.LocalizedName),T(k(c.cityKey)),e.next=9,L(c.Key);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){T(k("215854")),T(E("there was an error to get location")),console.log("there was an error to get location")},K=function(){return a?"dark":""},F=function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.searchCityAutoComplete(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(j.a)(d.a.mark((function e(t){var r,n,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return T(k(t)),e.next=3,p.get5DayForeCast(t,i);case 3:return r=e.sent,e.next=6,p.getCityCurrentCondition(t);case 6:return n=e.sent,e.next=9,p.searchCityByCityKey(t);case 9:c=e.sent,m(n[0]),h(r.DailyForecasts),D(c.LocalizedName);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){T(function(e){return function(){var t=Object(j.a)(d.a.mark((function t(r){var n,c,a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p.getCityCurrentCondition(e);case 3:return n=t.sent,t.next=6,p.searchCityByCityKey(e);case 6:return c=t.sent,t.next=9,p.save(c,n);case 9:a=t.sent,r({type:"ADD_CITY",cityToSave:a}),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),r({type:"ERROR",err:t.t0});case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e){return t.apply(this,arguments)}}()}(c)),T(E("city added to favorits"))};return Object(M.jsxs)("section",{className:"main-layout",children:[Object(M.jsxs)("div",{className:"forecast-page ".concat(K()," flex column justify-center align-center"),children:[Object(M.jsx)(N,{onSearch:F,onGetCityForecast:L}),C&&Object(M.jsx)("h1",{children:C}),y&&Object(M.jsx)("span",{children:y.WeatherText}),b&&Object(M.jsxs)("span",{className:"current-temp",children:["\u2103"===i?y.Temperature.Metric.Value:y.Temperature.Imperial.Value,i]}),b&&Object(M.jsx)(_,{forecast:b,isDarkMode:K,degree:i,darkMod:a}),r.some((function(t){return e=t._id,t.cityKey===c}))?Object(M.jsx)("button",{className:"btn-remove-from-favorit",onClick:function(){T(w(e)),T(E("city removed"))},children:"delete city from favorits"}):Object(M.jsx)("button",{className:"btn-add-to-favorit",onClick:function(){return A()},children:"add to favorit cities"})]}),u&&Object(M.jsx)(S,{msg:u,onCloseModal:function(){T(E(""))}})]})};function K(e){var t=e.favoritCity,r=e.onDeleteCity,c=e.onSetCity,a=e.isDarkMode,i=e.degree,s=(e.darkMod,Object(n.useState)("")),l=Object(o.a)(s,2),d=l[0],j=l[1],f=Object(n.useState)(""),p=Object(o.a)(f,2),b=p[0],h=p[1];Object(n.useEffect)((function(){j(v()),h(O())}),[i]);var v=function(){return"\u2103"===i?t.cityCurrentCondition[0].Temperature.Metric.Value:t.cityCurrentCondition[0].Temperature.Imperial.Value},O=function(){return"\u2103"===i?t.cityCurrentCondition[0].Temperature.Metric.Unit:t.cityCurrentCondition[0].Temperature.Imperial.Unit};return Object(M.jsx)("div",{className:"favorit-preview ".concat(a()," flex column align-center justify-center"),onClick:function(){c(t.cityKey)},children:Object(M.jsxs)(u.b,{to:"/",className:"favorit-preview-link",children:[Object(M.jsx)("h1",{className:"favorit-preview-h1 ".concat(a()),children:t.name}),Object(M.jsxs)("div",{className:"favorit-preview-content flex column justify-center align-center",children:[Object(M.jsxs)("span",{className:"favorit-preview-span ".concat(a()),children:[d&&Object(M.jsx)("span",{children:d}),d&&Object(M.jsx)("span",{children:b})]}),Object(M.jsx)("span",{className:"favorit-preview-span ".concat(a()),children:t.cityCurrentCondition[0].WeatherText}),Object(M.jsx)("button",{className:"delete-btn",onClick:function(e){return function(e){e.preventDefault(),r(t._id)}(e)},children:"remove city"})]})]})})}var F=function(e){var t=e.favoritCities,r=e.onDeleteCity,n=e.onSetCity,c=e.isDarkMode,a=e.degree,i=e.darkMod;return t&&0!==t.length?Object(M.jsx)("div",{className:"favorit-list flex align-center justify-center",children:t.map((function(e){return Object(M.jsx)(T.a,{variant:"outlined",children:Object(M.jsx)(K,{favoritCity:e,onDeleteCity:r,onSetCity:n,isDarkMode:c,degree:a,darkMod:i})},e._id)}))}):Object(M.jsx)("div",{children:"There is no favorit cities"})},L=function(){var e=Object(s.c)((function(e){return e.weatherModule})),t=e.favoritCities,r=e.darkMod,n=e.degree,c=e.error,a=Object(s.b)(),i=function(){return r?"dark":""};return Object(M.jsx)("div",{children:Object(M.jsxs)("section",{className:"main-layout",children:[Object(M.jsx)("div",{className:"favorit-page ".concat(i()," flex column"),children:t&&Object(M.jsx)(F,{favoritCities:t,onDeleteCity:function(e){a(w(e)),a(E("city removed"))},onSetCity:function(e){a(k(e))},isDarkMode:i,degree:n,darkMod:r})}),c&&Object(M.jsx)(S,{msg:c,onCloseModal:function(){a(E(""))}})]})})};function A(){var e=Object(s.c)((function(e){return e.weatherModule})).darkMod;return Object(M.jsx)("footer",{className:e?"app-footer dark":"app-footer",children:Object(M.jsx)("div",{className:"flex justify-center align-center",children:"Coffeerights 2020"})})}var P=function(){return Object(M.jsxs)("div",{className:"weather-app",children:[Object(M.jsx)(D,{}),Object(M.jsxs)(i.c,{children:[Object(M.jsx)(i.a,{path:"/favoritCities",component:L}),Object(M.jsx)(i.a,{path:"/",component:I})]}),Object(M.jsx)(A,{})]})},V=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,63)).then((function(t){var r=t.getCLS,n=t.getFID,c=t.getFCP,a=t.getLCP,i=t.getTTFB;r(e),n(e),c(e),a(e),i(e)}))},B=r(21),Y=r(34),G=r(35),U=r(8),q={cityKey:"",favoritCities:[],currentForecast:"",error:"",darkMod:!1,degree:"\u2103"};var z=Object(B.b)({weatherModule:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CITY":return Object(U.a)(Object(U.a)({},e),{},{cityKey:t.cityKey});case"SET_DARKMOD":return Object(U.a)(Object(U.a)({},e),{},{darkMod:t.isDark});case"SET_DEGREE":return Object(U.a)(Object(U.a)({},e),{},{degree:t.degree});case"SET_CURRENT_FORECAST":return Object(U.a)(Object(U.a)({},e),{},{currentForecast:t.currentForecast});case"ADD_CITY":return Object(U.a)(Object(U.a)({},e),{},{favoritCities:[].concat(Object(G.a)(e.favoritCities),[t.cityToSave])});case"REMOVE_CITY":return Object(U.a)(Object(U.a)({},e),{},{favoritCities:e.favoritCities.filter((function(e){return e._id!==t.cityId}))});case"ERROR":return Object(U.a)(Object(U.a)({},e),{},{error:t.msg});default:return e}}}),J=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||B.c,W=Object(B.d)(z,J(Object(B.a)(Y.a)));a.a.render(Object(M.jsx)(s.a,{store:W,children:Object(M.jsx)(u.a,{children:Object(M.jsx)(P,{})})}),document.getElementById("root")),V()}},[[50,1,2]]]);
//# sourceMappingURL=main.0a21ad18.chunk.js.map